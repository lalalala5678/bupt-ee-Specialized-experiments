# 实验报告：简易计算器的实现与控制功能

| 要求 | 完成情况 |
| --- | --- |
| 正确进行四则运算 | ✔️ |
| 实现控制功能 | ✔️ |
| 使用多线程编程 | ✔️ |

## 实验内容

### 前端界面设计

#### HTML 部分
我们使用 HTML 来创建计算器的基本结构。通过按钮的点击事件，用户可以输入数字和运算符。

#### CSS 部分
通过 CSS 美化了计算器的界面，使其更具吸引力。使用了响应式设计，使界面在不同设备上都能良好显示。

### JavaScript 实现

#### 计算功能实现
计算功能通过 JavaScript 的 `eval` 函数实现。用户点击按钮输入值，点击等号进行计算。具体过程如下：
1. **输入处理**：每次用户点击按钮时，数字和运算符被添加到显示屏上。
2. **计算结果**：用户点击等号时，`eval` 函数对显示屏上的表达式进行求值，并返回结果。`eval` 是一个内置的 JavaScript 函数，它可以把字符串当作代码来执行。例如，输入 `2+3*4` 会返回 `14`。
3. **显示结果**：计算结果显示在输入框中，如果输入无效，显示“Error”。

#### 3D 控制功能
使用 Three.js 实现 3D 图形显示，根据计算结果改变立方体的颜色和旋转效果。

##### 正方体旋转和颜色改变实现
1. **场景初始化**：
   - 创建 Three.js 场景、相机和渲染器。
   - 将相机位置设置为较远距离，以便观察整个场景。
   - 将渲染器附加到 HTML 文档的特定容器中。

2. **正方体创建**：
   - 创建一个立方体几何体和材质，并将材质颜色设置为初始值。
   - 将立方体添加到场景中。

3. **光源设置**：
   - 添加点光源，使立方体产生阴影效果。
   - 启用渲染器的阴影映射，以增强视觉效果。

4. **事件监听**：
   - 监听计算完成事件（`calculationCompleted`）。
   - 根据计算结果改变立方体的颜色：奇数变红，偶数变绿，结果为0时变为蓝色。

5. **动画效果**：
   - 通过 `requestAnimationFrame` 实现持续的动画效果。
   - 在每一帧中，更新立方体的旋转角度，使其不断旋转。
   - 使用渲染器渲染场景和相机视图。

### 多线程实现
在本次实验中，通过包含两个 JavaScript 文件实现了多线程处理。一个文件用于计算逻辑，另一个文件用于 3D 控制逻辑。通过 Web Worker 技术，实现了计算任务和图形渲染任务的并行处理，提高了程序的响应速度和性能。

### 功能验证

1. **正确进行四则运算**：计算器能够正确处理加、减、乘、除运算，输入并显示计算结果。
2. **实现控制功能**：根据计算结果改变 3D 立方体的颜色，偶数变绿，奇数变红，结果为 0 时，立方体变为蓝色。
3. **多线程编程**：通过 Web Worker 技术，将计算任务和图形渲染任务分离到不同的线程中，提高了程序的运行效率。

### 总结

通过本次实验，成功实现了一个简易四则运算计算器，并通过 3D 图形显示结果状态。实现了基础的输入、运算、显示和控制功能，并通过 Three.js 增强了视觉效果。同时，通过包含两个 JavaScript 文件，实现了多线程编程，提高了程序的响应速度和性能。